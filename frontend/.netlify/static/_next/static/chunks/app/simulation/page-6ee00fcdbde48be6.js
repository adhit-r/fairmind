(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8017],{44653:function(e,t,r){Promise.resolve().then(r.bind(r,99457))},57977:function(e,t,r){"use strict";r.d(t,{Z:function(){return u}});var a=r(64090);/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},d=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:m,...f}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:i?24*Number(n)/Number(s):n,className:l("lucide",c),...!u&&!d(f)&&{"aria-hidden":"true"},...f},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,n)=>{let{className:d,...o}=r;return(0,a.createElement)(c,{ref:n,iconNode:t,className:l("lucide-".concat(s(i(e))),"lucide-".concat(e),d),...o})});return r.displayName=i(e),r}},5835:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(57977).Z)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},26490:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(57977).Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},43081:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});let a=(0,r(57977).Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]])},99457:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var a=r(3827),s=r(64090),n=r(15671),i=r(575),l=r(33277),d=r(22782),o=r(12647),c=r(99497),u=r(43081),m=r(26490),f=r(5835);function h(e){let{runs:t,onViewDetails:r}=e;if(!t||0===t.length)return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Simulation History"]})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No simulation runs yet."})})]});let s=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),d=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"failed":return"bg-red-100 text-red-800";case"running":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"h-4 w-4"}),"Recent Simulations"]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"space-y-3",children:t.slice(0,5).map(e=>{var t,n;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"font-medium text-sm",children:e.model_name}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:s(e.created_at)})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(null===(n=e.metrics)||void 0===n?void 0:null===(t=n.performance)||void 0===t?void 0:t.accuracy)&&(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Acc: ",Math.round(100*e.metrics.performance.accuracy),"%"]}),(0,a.jsx)(l.C,{className:d(e.status),children:e.status}),r&&(0,a.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>r(e),className:"h-7 px-2",children:[(0,a.jsx)(f.Z,{className:"h-3 w-3 mr-1"}),"View"]})]})]},e.id)})}),t.length>5&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t text-center",children:(0,a.jsxs)(i.z,{variant:"outline",size:"sm",children:["View All (",t.length," total)"]})})]})]})}function x(e){let{matrix:t,labels:r}=e;if(!t||!r)return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"CONFUSION_MATRIX"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No confusion matrix data available."})})]});let s=Math.max(...t.flat()),i=Math.min(...t.flat());return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"CONFUSION_MATRIX"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-2 text-xs",children:[(0,a.jsx)("div",{className:"text-muted-foreground",children:"Predicted →"}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1",children:r.map((e,t)=>(0,a.jsx)("div",{className:"text-center font-medium text-muted-foreground",children:e},t))})]}),t.map((e,t)=>(0,a.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-2 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center justify-end pr-2 font-medium text-muted-foreground",children:[0===t&&(0,a.jsx)("span",{className:"rotate-90 transform origin-center",children:"Actual"}),(0,a.jsx)("span",{className:"ml-2",children:r[t]})]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-1",children:e.map((e,t)=>{let r=(e-i)/(s-i),n=Math.round(255*r);return(0,a.jsx)("div",{className:"\n                        p-2 text-center font-mono text-xs border\n                        ".concat("bg-gray-".concat(Math.max(100,Math.min(900,Math.round(800*r+100))))," \n                        ").concat(r>.5?"text-white":"text-gray-900","\n                      "),style:{backgroundColor:"rgb(".concat(255-n,", ").concat(255-n,", ").concat(255-n,")"),color:n>127?"white":"black"},children:e},t)})})]},t))]}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsxs)("span",{children:["Min: ",i]}),(0,a.jsxs)("span",{children:["Max: ",s]})]})})]})]})}function p(e){let{perClass:t}=e;if(!t||0===Object.keys(t).length)return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"PER_CLASS_METRICS"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No per-class metrics available."})})]});let r=Object.keys(t),s=["precision","recall","f1"];return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"PER_CLASS_METRICS"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-muted-foreground",children:["Class: ",e]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:s.map(r=>{let s=Math.round(100*t[e][r]);return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground uppercase",children:r}),(0,a.jsxs)("span",{className:"font-mono",children:[s,"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-gray-800 h-2 rounded-full transition-all duration-300",style:{width:"".concat(s,"%")}})})]},r)})})]},e))}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsx)("div",{className:"grid grid-cols-3 gap-4 text-xs text-muted-foreground",children:s.map(e=>(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-medium uppercase",children:e}),(0,a.jsxs)("div",{className:"font-mono",children:[Math.round(Object.values(t).reduce((t,r)=>t+r[e],0)/r.length*100),"%"]})]},e))})})]})]})}function g(e){let{byAttribute:t}=e;if(!t||0===t.length)return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"FAIRNESS_BY_ATTRIBUTE"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-[200px] flex items-center justify-center text-muted-foreground",children:"No fairness metrics by attribute available."})})]});let r=["demographic_parity_difference","equal_opportunity_difference","disparate_impact_ratio"];return(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{className:"pb-3",children:(0,a.jsx)(n.ll,{className:"text-sm font-mono",children:"FAIRNESS_BY_ATTRIBUTE"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-sm font-medium text-muted-foreground",children:["Attribute: ",e.attribute]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-2",children:r.map(t=>{let r=e[t];if(void 0===r)return null;let s=r,n=0,i=!0;return"demographic_parity_difference"===t||"equal_opportunity_difference"===t?(n=Math.min(100,Math.round(100*(s=Math.abs(r)))),i=s<.1):"disparate_impact_ratio"===t&&(s=r,n=Math.round(100*Math.abs(1-r)),i=.2>Math.abs(1-r)),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:t.replace(/_/g," ").toUpperCase()}),(0,a.jsx)("span",{className:"font-mono",children:r.toFixed(4)})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(i?"bg-gray-800":"bg-red-600"),style:{width:"".concat(Math.min(100,n),"%")}})})]},t)})})]},e.attribute))}),(0,a.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Fairness Assessment"}),(0,a.jsx)("span",{children:t.every(e=>.1>Math.abs(e.demographic_parity_difference))?"✓ FAIR":"⚠ BIAS DETECTED"})]})})]})]})}function v(){var e,t,m,f,v,j,b,y,N,w,_,S,C,k,E,I,T,O,M,A,R,Z,P,D;let{profile:z}=r(49221).useAuth(),L=(null==z?void 0:z.default_org_id)||null,[V,Y]=(0,s.useState)(null),[F,B]=(0,s.useState)(null),[U,q]=(0,s.useState)(""),[G,J]=(0,s.useState)(""),[W,X]=(0,s.useState)(""),[H,Q]=(0,s.useState)("builtin"),[$,K]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(null),[er,ea]=(0,s.useState)([]),[es,en]=(0,s.useState)([]),[ei,el]=(0,s.useState)(null),[ed,eo]=(0,s.useState)([{id:"init",label:"Initializing simulation environment",status:"todo"},{id:"load_model",label:"Loading model and dependencies",status:"todo"},{id:"generate_data",label:"Generating synthetic scenarios",status:"todo"},{id:"fairness",label:"Running fairness checks",status:"todo"},{id:"robustness",label:"Analyzing robustness metrics",status:"todo"},{id:"explainability",label:"Evaluating explainability",status:"todo"},{id:"report",label:"Generating final report",status:"todo"}]),ec="https://api.fairmind.xyz";(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("".concat(ec,"/simulations/recent?org_id=").concat(L));if(e.ok){let t=await e.json();en(t)}}catch(e){console.error("Failed to load simulation history:",e)}};L&&e()},[L,ec]);let eu=async()=>{try{if(K(!0),et(null),ea([]),eo(e=>e.map(e=>({...e,status:"init"===e.id?"running":"todo"}))),ea(e=>[...e,"[".concat(new Date().toISOString(),"] STARTING_SIMULATION")]),eo(e=>e.map(e=>"init"===e.id?{...e,status:"done"}:e)),eo(e=>e.map(e=>"load_model"===e.id?{...e,status:"running"}:e)),!V)throw Error("Select a model file");let e=new FormData;e.append("file",V);let t=await fetch("".concat(ec,"/models/upload"),{method:"POST",body:e}),r=await t.json();if(!t.ok||!r.path)throw Error(r.detail||"Model upload failed");ea(e=>[...e,"[".concat(new Date().toISOString(),"] MODEL_UPLOAD_COMPLETE")]),eo(e=>e.map(e=>"load_model"===e.id?{...e,status:"done"}:e));let a={path:r.path,org_id:L};if(F){eo(e=>e.map(e=>"generate_data"===e.id?{...e,status:"running"}:e));let e=new FormData;e.append("file",F);let t=await fetch("".concat(ec,"/datasets/upload"),{method:"POST",body:e}),s=await t.json();if(!t.ok||!s.path)throw Error(s.detail||"Dataset upload failed");if(!U)throw Error("Target column required");if(!G)throw Error("Features required (comma-separated)");a={path:r.path,dataset_path:s.path,target:U,features:G.split(",").map(e=>e.trim()).filter(Boolean),protected_attributes:W.split(",").map(e=>e.trim()).filter(Boolean)},eo(e=>e.map(e=>"generate_data"===e.id?{...e,status:"done"}:e))}else if(U&&G){eo(e=>e.map(e=>"generate_data"===e.id?{...e,status:"running"}:e));let e={columns:[...G.split(",").map(e=>({name:e.trim(),dtype:"float"})),{name:U.trim(),dtype:"int"}]},t=await fetch("".concat(ec,"/datasets/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({row_count:1e3,schema:e,engine:H})}),s=await t.json();if(!t.ok||!s.path)throw Error(s.detail||"Generation failed");a={path:r.path,dataset_path:s.path,target:U,features:G.split(",").map(e=>e.trim()).filter(Boolean),protected_attributes:W.split(",").map(e=>e.trim()).filter(Boolean),org_id:L},ea(e=>[...e,"[".concat(new Date().toISOString(),"] DATASET_GENERATED engine=").concat(H)]),eo(e=>e.map(e=>"generate_data"===e.id?{...e,status:"done"}:e))}eo(e=>e.map(e=>"fairness"===e.id?{...e,status:"running"}:e));let s=await fetch("".concat(ec,"/simulation/run"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await s.json();if(!s.ok)throw Error(n.detail||"Simulation failed");et(n),ea(e=>[...e,"[".concat(new Date().toISOString(),"] FAIRNESS_ANALYSIS_COMPLETE")]),eo(e=>e.map(e=>"fairness"===e.id?{...e,status:"done"}:e))}catch(e){et({error:(null==e?void 0:e.message)||String(e)})}finally{K(!1)}};return(0,a.jsxs)("div",{className:"container mx-auto py-8 space-y-6",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"New Simulation"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Create and run AI model simulations"})]})}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Simulation Configuration"})}),(0,a.jsxs)(n.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("div",{className:"mb-2",children:"Step 1: Upload/Select Model → Step 2: Provide Dataset or Schema → Step 3: Review & Run"}),(0,a.jsx)("div",{className:"mb-4",children:"If you don't have a dataset, provide target and features and use the Generate tab to synthesize data."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Target column"}),(0,a.jsx)(d.I,{placeholder:"label",value:U,onChange:e=>q(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)(o._,{children:"Feature columns (comma-separated)"}),(0,a.jsx)(d.I,{placeholder:"age,income",value:G,onChange:e=>J(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Protected attributes (comma-separated)"}),(0,a.jsx)(d.I,{placeholder:"gender,race",value:W,onChange:e=>X(e.target.value)})]}),(0,a.jsxs)(c.Tabs,{defaultValue:"upload",className:"w-full",children:[(0,a.jsxs)(c.TabsList,{children:[(0,a.jsx)(c.TabsTrigger,{value:"upload",children:"Upload Dataset"}),(0,a.jsx)(c.TabsTrigger,{value:"generate",children:"Generate Synthetic Data"})]}),(0,a.jsxs)(c.TabsContent,{value:"upload",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Model file (.pkl/.joblib/.pt/.onnx/.h5)"}),(0,a.jsx)(d.I,{type:"file",accept:".pkl,.pickle,.joblib,.pt,.pth,.onnx,.pb,.h5",onChange:e=>{var t;return Y((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Dataset file (CSV/Parquet)"}),(0,a.jsx)(d.I,{type:"file",accept:".csv,.parquet",onChange:e=>{var t;return B((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(i.z,{onClick:eu,disabled:$||!V||!F||!U||!G,children:[(0,a.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),$?"Running...":"Run Simulation"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:"Upload a dataset and provide target/features to run."})]}),ee&&(0,a.jsx)("div",{className:"rounded border p-3 text-sm",children:ee.error?(0,a.jsx)("p",{className:"text-red-600",children:ee.error}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(null===(t=ee.metrics)||void 0===t?void 0:null===(e=t.performance)||void 0===e?void 0:e.accuracy)&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*ee.metrics.performance.accuracy),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Accuracy"})]}),(null===(f=ee.metrics)||void 0===f?void 0:null===(m=f.performance)||void 0===m?void 0:m.precision_macro)&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*ee.metrics.performance.precision_macro),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Precision"})]}),(null===(j=ee.metrics)||void 0===j?void 0:null===(v=j.performance)||void 0===v?void 0:v.recall_macro)&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*ee.metrics.performance.recall_macro),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Recall"})]}),(null===(y=ee.metrics)||void 0===y?void 0:null===(b=y.performance)||void 0===b?void 0:b.f1_macro)&&(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(100*ee.metrics.performance.f1_macro),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"F1 Score"})]})]})})})]}),(0,a.jsxs)(c.TabsContent,{value:"generate",className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Generate a synthetic dataset. If you provide a small sample dataset first, we’ll infer distributions; else we’ll use your schema selections."}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Optional sample (CSV/Parquet)"}),(0,a.jsx)(d.I,{type:"file",accept:".csv,.parquet",onChange:e=>{var t;return B((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Rows"}),(0,a.jsx)(d.I,{type:"number",defaultValue:1e3,id:"gen-rows"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(o._,{children:"Engine"}),(0,a.jsxs)("select",{className:"h-9 rounded-md border px-3 text-sm bg-background",value:H,onChange:e=>Q(e.target.value),children:[(0,a.jsx)("option",{value:"builtin",children:"Builtin (NumPy/Pandas)"}),(0,a.jsx)("option",{value:"sdv",children:"SDV (requires sample data)"})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsx)(i.z,{onClick:async()=>{try{let e;let t=document.getElementById("gen-rows"),r=Math.max(1,parseInt((null==t?void 0:t.value)||"1000",10));if(F){let t=new FormData;t.append("file",F);let r=await fetch("".concat(ec,"/datasets/upload"),{method:"POST",body:t}),a=await r.json();if(!r.ok||!a.path)throw Error(a.detail||"Sample upload failed");e=a.path}if("sdv"===H&&!e){et({error:"SDV engine requires a sample dataset (CSV/Parquet). Upload a small sample or switch engine to Builtin."});return}if(!e&&(!U||!G)){et({error:"Provide target and features to generate synthetic data without a sample."});return}let a={row_count:r,engine:H};e?a.sample_path=e:a.schema={columns:[...G.split(",").map(e=>({name:e.trim(),dtype:"float"})),{name:U.trim(),dtype:"int"}]};let s=await fetch("".concat(ec,"/datasets/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),n=await s.json();if(!s.ok||!n.path)throw Error(n.detail||"Generation failed");if(!V)throw Error("Select a model file to run on synthetic data");let i=new FormData;i.append("file",V);let l=await fetch("".concat(ec,"/models/upload"),{method:"POST",body:i}),d=await l.json();if(!l.ok||!d.path)throw Error(d.detail||"Model upload failed");let o={path:d.path,dataset_path:n.path,target:U,features:G.split(",").map(e=>e.trim()).filter(Boolean),protected_attributes:W.split(",").map(e=>e.trim()).filter(Boolean),org_id:L},c=await fetch("".concat(ec,"/simulation/run"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),u=await c.json();if(!c.ok)throw Error(u.detail||"Simulation failed");et(u)}catch(e){et({error:(null==e?void 0:e.message)||String(e)})}},children:"Generate + Run"})})]})]})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-3",children:[(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Progress Steps"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"space-y-2 text-sm",children:ed.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between border-b last:border-0 py-2",children:[(0,a.jsx)("span",{children:e.label}),(0,a.jsx)(l.C,{variant:"done"===e.status?"default":"running"===e.status?"secondary":"outline",children:e.status})]},e.id))})})]}),(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Live Logs"})}),(0,a.jsx)(n.aY,{children:(0,a.jsx)("div",{className:"h-64 overflow-auto rounded border p-2 font-mono text-xs bg-black text-green-200",children:0===er.length?(0,a.jsx)("div",{className:"opacity-60",children:"No logs yet…"}):er.map((e,t)=>(0,a.jsx)("div",{children:e},t))})})]}),(0,a.jsx)(h,{runs:es,onViewDetails:e=>el(e)})]}),ee&&!ee.error&&(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsx)(n.ll,{children:"Simulation Results"})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(x,{matrix:null===(w=ee.metrics)||void 0===w?void 0:null===(N=w.performance)||void 0===N?void 0:N.confusion_matrix,labels:null===(S=ee.metrics)||void 0===S?void 0:null===(_=S.performance)||void 0===_?void 0:_.labels}),(0,a.jsx)(p,{perClass:null===(k=ee.metrics)||void 0===k?void 0:null===(C=k.performance)||void 0===C?void 0:C.per_class})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(g,{byAttribute:null===(I=ee.metrics)||void 0===I?void 0:null===(E=I.fairness)||void 0===E?void 0:E.by_attribute})})]})]})}),ei&&(0,a.jsxs)(n.Zb,{children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{children:["Run Details: ",ei.model_name]})}),(0,a.jsxs)(n.aY,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsx)(x,{matrix:null===(O=ei.metrics)||void 0===O?void 0:null===(T=O.performance)||void 0===T?void 0:T.confusion_matrix,labels:null===(A=ei.metrics)||void 0===A?void 0:null===(M=A.performance)||void 0===M?void 0:M.labels}),(0,a.jsx)(p,{perClass:null===(Z=ei.metrics)||void 0===Z?void 0:null===(R=Z.performance)||void 0===R?void 0:R.per_class})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(g,{byAttribute:null===(D=ei.metrics)||void 0===D?void 0:null===(P=D.fairness)||void 0===P?void 0:P.by_attribute})})]})]})]})}},33277:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(3827);r(64090);var s=r(49769),n=r(22169);let i=(0,s.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(i({variant:r}),t),...s})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return o}});var a=r(3827),s=r(64090),n=r(59143),i=r(49769),l=r(22169);let d=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:s,size:i,className:r})),ref:t,...c})});o.displayName="Button"},15671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return o},Zb:function(){return i},aY:function(){return c},ll:function(){return d}});var a=r(3827),s=r(64090),n=r(22169);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...s})});i.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},22782:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(3827),s=r(64090),n=r(22169);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},12647:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});var a=r(3827),s=r(64090),n=r(24602),i=r(49769),l=r(22169);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,l.cn)(d(),r),...s})});o.displayName=n.f.displayName},99497:function(e,t,r){"use strict";r.r(t),r.d(t,{Tabs:function(){return l},TabsContent:function(){return c},TabsList:function(){return d},TabsTrigger:function(){return o}});var a=r(3827),s=r(64090),n=r(31552),i=r(22169);let l=n.fC,d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.aV,{ref:t,className:(0,i.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...s})});d.displayName=n.aV.displayName;let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.xz,{ref:t,className:(0,i.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",r),...s})});o.displayName=n.xz.displayName;let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.VY,{ref:t,className:(0,i.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...s})});c.displayName=n.VY.displayName},49221:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return o},useAuth:function(){return c}});var a=r(3827),s=r(64090),n=r(47907),i=r(87176);let l=null,d=(0,s.createContext)(void 0);function o(e){let{children:t}=e,[r,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[m,f]=(0,s.useState)(!0),h=(0,n.useRouter)(),x=(l||(l=(0,i.eI)("https://swapkvhzyhcruoyjpkyr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN3YXBrdmh6eWhjcnVveWpwa3lyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM0Njg4NTQsImV4cCI6MjA2OTA0NDg1NH0.ckdz6Kv63Tp4F6iuMhzuTQr8sfMhxpeZVmGzGaf40k8")),l),p=async e=>{try{let{data:t,error:r}=await x.from("profiles").select("*").eq("id",e).single();if(r)return console.error("Error fetching user profile:",r),null;return t}catch(e){return console.error("Error fetching user profile:",e),null}};(0,s.useEffect)(()=>{let e=!0;(async()=>{try{let{data:{session:r}}=await x.auth.getSession(),a=(null==r?void 0:r.user)||null;if(!e)return;if(o(a),a){let r=await p(a.id);if(!e)return;if(r)u({id:String(r.id),email:String(a.email),full_name:r.full_name?String(r.full_name):void 0,avatar_url:r.avatar_url?String(r.avatar_url):void 0,role:r.role?String(r.role):void 0,username:r.username?String(r.username):void 0,default_org_id:r.default_org_id?String(r.default_org_id):null});else{var t;u({id:a.id,email:a.email,full_name:null===(t=a.user_metadata)||void 0===t?void 0:t.full_name,role:"user",default_org_id:null})}}else u(null)}finally{e&&f(!1)}})();let{data:{subscription:t}}=x.auth.onAuthStateChange(async(e,t)=>{let r=(null==t?void 0:t.user)||null;if(o(r),r){let e=await p(r.id);if(e)u({id:String(e.id),email:String(r.email),full_name:e.full_name?String(e.full_name):void 0,avatar_url:e.avatar_url?String(e.avatar_url):void 0,role:e.role?String(e.role):void 0,username:e.username?String(e.username):void 0,default_org_id:e.default_org_id?String(e.default_org_id):null});else{var a;u({id:r.id,email:r.email,full_name:null===(a=r.user_metadata)||void 0===a?void 0:a.full_name,role:"user",default_org_id:null})}}else u(null)});return()=>{e=!1,t.unsubscribe()}},[x]);let g=async(e,t)=>{try{let{data:r,error:a}=await x.auth.signInWithPassword({email:e,password:t});if(a)return console.error("Login error:",a),{success:!1,error:a.message};return{success:!0}}catch(e){return console.error("Login failed:",e),{success:!1,error:e instanceof Error?e.message:"Login failed. Please try again."}}},v=async(e,t,r)=>{try{let{data:a,error:s}=await x.auth.signUp({email:e,password:t,options:{data:{full_name:r}}});if(s)throw s;return{error:null}}catch(e){return console.error("Signup failed:",e),{error:e instanceof Error?e:Error("Signup failed")}}},j=async()=>{try{await x.auth.signOut(),o(null),u(null),h.push("/login")}catch(e){console.error("Logout failed:",e)}},b=async e=>{if(r)try{let{data:t,error:a}=await x.from("profiles").update(e).eq("id",r.id).select().single();if(a){console.error("Error updating profile:",a);return}u(t=>t?{...t,...e}:null)}catch(e){console.error("Error updating profile:",e)}},y=async(e,t,a)=>!!r&&!!c&&("admin"===c.role||"view"===a);return(0,a.jsx)(d.Provider,{value:{user:r,profile:c,login:g,signUp:v,logout:j,updateProfile:b,hasPermission:y,loading:m},children:!m&&t})}function c(){let e=(0,s.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},22169:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(75504),s=r(51367);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},24602:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var a=r(64090),s=r(29586),n=r(3827),i=a.forwardRef((e,t)=>(0,n.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i}},function(e){e.O(0,[2387,1699,1552,4347,4612,2971,8069,1744],function(){return e(e.s=44653)}),_N_E=e.O()}]);