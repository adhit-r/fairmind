---
import type { Feature, Stats } from '../../data/homepage';
import Icon from '../ui/Icon.astro';

interface Props {
  features: Feature[];
  stats: Stats[];
}

const { features, stats } = Astro.props;

const colorClasses = {
  blue: {
    bg: 'bg-blue-50',
    text: 'text-blue-600',
    link: 'text-blue-600 hover:text-blue-700'
  },
  purple: {
    bg: 'bg-purple-50',
    text: 'text-purple-600',
    link: 'text-purple-600 hover:text-purple-700'
  },
  indigo: {
    bg: 'bg-indigo-50',
    text: 'text-indigo-600',
    link: 'text-indigo-600 hover:text-indigo-700'
  }
};
---

<section id="features" class="py-12 sm:py-16 md:py-20 bg-gray-50 relative overflow-hidden" aria-labelledby="features-title">
  <!-- Background elements -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
    <div class="absolute -right-20 sm:-right-40 -top-20 sm:-top-40 w-40 sm:w-80 h-40 sm:h-80 bg-primary-500/5 rounded-full mix-blend-soft-light filter blur-3xl"></div>
    <div class="absolute -left-20 sm:-left-40 -bottom-20 sm:-bottom-40 w-40 sm:w-80 h-40 sm:h-80 bg-secondary-500/5 rounded-full mix-blend-soft-light filter blur-3xl"></div>
  </div>
  
  <div class="container mx-auto px-4 sm:px-6 relative z-10">
    <div class="max-w-4xl mx-auto text-center mb-12 sm:mb-16">
      <span class="inline-block px-3 sm:px-4 py-2 text-sm font-medium text-primary-700 bg-primary-50 rounded-full mb-4">Core Features</span>
      <h2 id="features-title" class="text-3xl sm:text-4xl md:text-5xl font-bold text-gray-900 mb-4 sm:mb-6">Technical Capabilities</h2>
      <p class="text-lg sm:text-xl text-gray-600">Comprehensive AI governance tools with advanced bias detection and explainability features.</p>
    </div>
    
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8">
      {features.map((feature) => {
        const colors = colorClasses[feature.color as keyof typeof colorClasses];
        return (
          <article class="bg-white rounded-xl p-6 sm:p-8 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-100 hover:-translate-y-1" tabindex="0">
            <div class={`w-12 h-12 sm:w-16 sm:h-16 ${colors.bg} rounded-xl flex items-center justify-center ${colors.text} mb-4 sm:mb-6`}>
              <Icon name={feature.icon} size="lg" />
            </div>
            <h3 class="text-lg sm:text-xl font-bold text-gray-900 mb-3">{feature.title}</h3>
            <p class="text-sm sm:text-base text-gray-600 mb-4">{feature.description}</p>
            <ul class="text-sm text-gray-500 space-y-1.5 mb-4" role="list">
              {feature.benefits.map((benefit) => (
                <li class="flex items-start" role="listitem">
                  <Icon name="check" class="h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0" />
                  <span>{benefit}</span>
                </li>
              ))}
            </ul>
            <a 
              href={feature.link.href} 
              class={`${colors.link} font-medium inline-flex items-center transition-colors group focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-current rounded`}
            >
              {feature.link.text}
              <Icon name="arrow" class="h-5 w-5 ml-1 transform transition-transform group-hover:translate-x-1" />
            </a>
          </article>
        );
      })}
    </div>
    
    <div class="mt-16 text-center">
      <a 
        href="/features" 
        class="inline-flex items-center px-8 py-4 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200"
      >
        Explore all features
        <Icon name="arrow" class="ml-2 -mr-1 w-5 h-5" />
      </a>
    </div>
    
    <!-- Technical Specifications -->
    <div class="mt-24 grid grid-cols-1 md:grid-cols-3 gap-8">
      {stats.map((stat) => (
        <div class="p-6 bg-white rounded-xl shadow-sm border border-gray-100">
          <div class="text-2xl font-bold text-primary-600 mb-2">{stat.value}</div>
          <div class="text-gray-600">{stat.label}</div>
        </div>
      ))}
    </div>
  </div>
</section>
